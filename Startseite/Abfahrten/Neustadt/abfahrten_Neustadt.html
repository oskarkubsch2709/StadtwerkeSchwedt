<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Abfahrtsanzeige Neustadt</title>
  <style>
     body {
     margin: 0;
     padding: 0;
     font-family: Arial, sans-serif;
   }

/* Grüner Balken als Container */
    .green-bar {
      width: 100%;
      background-color: #008b45;
      margin: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0px;
      color: white;
      font-weight: bold;
      font-size: 16px;
}


    /* Navigationsbereich */
    .nav-bar {
      width: 100%;
      display: flex;
      align-items: center;
      background-color: #f4f4f4;
      padding: 10px 40px;
    }

    .nav-bar img {
      height: 50px;
      width: auto;
      margin-right: 40px;
    }

    .nav-links {
      display: flex;
      flex: 1; /* nimmt gesamte restliche Breite ein */
      justify-content: center; /* zentriert Links */
      gap: 30px;
    }

    .nav-links a {
      text-decoration: none;
      color: #333;
      font-weight: bold;
      font-size: 16px;
    }

    .nav-links a:hover {
      color: #008b45;
    }

    h1 {
      margin: 20px 0;
      color: #008b45;
      margin-bottom: 4px; /* Abstand unterhalb der Überschrift */
      margin-left: 50px;
    }

    h2 {
      margin: 8px 0;
      color: #008b45;
      margin-top: 5px; /* Abstand oberhalb des Absatzes */
    }

   /* Lauftext-Balken */
   .ticker-container {
  width: 100%;
  background-color: #f4f4f4;   /* gleiche Farbe wie nav-bar */
  overflow: hidden;
  border-top: 2px solid #444;
  border-bottom: 2px solid #444;
  position: relative;
  height: 40px; /* Höhe für stabilen Lauftext */
}

.ticker-text {
  position: absolute;
  white-space: nowrap;
  padding: 10px 20px;
  font-size: 16px;
  font-weight: bold;
  color: #333;
  animation: ticker linear infinite;
  animation-duration: var(--ticker-speed, 15s); /* Geschwindigkeit einstellbar */
}

/* Kontinuierlicher Lauftext von rechts nach links */
@keyframes ticker {
  0%   { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}

 .departure {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.2em;
      padding: 8px;
      border-bottom: 1px solid #ccc;
    }

    .line {
      font-weight: bold;
      background-color: #007bff;
      color: white;
      padding: 4px 10px;
      border-radius: 10px;
      margin-right: 30px;
      min-width: 40px;
      text-align: center;
    }

    .destination {
    flex: 1;
    min-width: 150px;
    }

    .platform {
    min-width: 50px;
    text-align: center;
    margin-right: 40px; /* Abstand zur Abfahrtszeit */
    font-family: Arial, sans-serif;
    }


    .countdown {
    font-family: Arial, sans-serif;
    min-width: 60px;
    text-align: right;
    }

    .departure.header {
    font-weight: bold;
    border-bottom: 2px solid black;
    background-color: #f0f0f0;
    }

    .table-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    padding: 8px 0;
    font-weight: bold;
    border-bottom: 2px solid black;
    font-family: Arial, sans-serif;
    }

    .table-header .header-cell {
    text-align: center; /* <-- hier liegt die Änderung */
    }

    /* Individuelle Breiten & Positionierung wie bei den Datenzeilen */
    .table-header .header-cell:nth-child(1) { min-width: 75px; margin-right: 30px; text-align: center; }
    .table-header .header-cell:nth-child(2) { flex: 1; min-width: 50px; text-align: center; }
    .table-header .header-cell:nth-child(3) { min-width: 50px; margin-right: 40px; text-align: center; }
    .table-header .header-cell:nth-child(4) { min-width: 60px; text-align: center; }
    .table-header .header-cell:nth-child(5) { min-width: 80px; text-align: center; }

   .line-1 {
  	background-color: #104E8B;
  	color: white;
	}

   .line-e1 {
	background-color: white;
	color: #104E8B;
	border: 2px solid #104E8B;
	}

   .line-2 {
  	background-color: orange;
  	color: black;
	}

   .line-e2 {
	background-color: white;
	color: black;
	border: 2px solid orange;
	}


   .info-panel {
	 white-space: pre-line;
 	 overflow: hidden;
 	 max-height: 0;
 	 opacity: 0;
 	 transition: all 0.5s ease;
 	 margin-left: 70px;
 	 margin-bottom: 5px;
 	 padding: 0 5px;
	}

    .info-panel.open {
	 opacity: 1;
 	 max-height: 500px; /* ausreichend hoch für deinen Inhalt */
 	 padding: 5px;
	}

    .delay {
 	min-width: 80px;
  	text-align: right;
  	font-weight: bold;
	}



@keyframes blink {
 	 0% { opacity: 1; }
 	 50% { opacity: 0; }
 	 100% { opacity: 1; }
	}

	.blinking {
	  animation: blink 1s infinite;
	}

  #infoText {
    margin-top: 20px;
    font-size: 1em;
    font-family: Arial, sans-serif;
  }

  #currentDateTime {
  position: absolute;
  top: 105px;
  right: 80px;
  font-family: Arial, sans-serif;
  font-size: 1em;
  }

.green-bar,
.nav-bar,
.ticker-container,
.table-header,
#departures,
#infoText {
  padding-left: 40px;
  padding-right: 40px;
  box-sizing: border-box;
}

		.load-more-container {
		  display: flex;
		  justify-content: center;
		  margin-top: 20px;
		}

		#loadMoreBtn {
		  background-color: #008b45;
		  color: white;
		  font-size: 16px;
		  padding: 10px 20px;
		  border: none;
		  border-radius: 12px;
		  cursor: pointer;
		  box-shadow: 0 3px 6px rgba(0,0,0,0.2);
		  transition: background-color 0.3s, transform 0.1s;
		}

		#loadMoreBtn:hover {
		  background-color: #008b00;       /* heller bei Hover */
		  transform: translateY(-1px);     /* leichter Hover-Effekt */
		}

		#loadMoreBtn:active {
		  transform: translateY(0);        /* zurück beim Klicken */
		}


</style>


  </style>
</head>
<body>

<!-- Grüner Balken mit Text -->
  <div class="green-bar bar-top">
    <div>Ein Unternehmen der Stadt Schwedt.</div>
    <div id="datetime"></div>
  </div>

  <!-- Inhaltsverzeichnis mit Logo + Links -->
  <div class="nav-bar">
    <!-- Logo -->
    <a href="../../../index.html">
     <img src="../../Logo.png" alt="Logo">
   </a>

    <!-- Links -->
    <div class="nav-links">
      <a href="../../Aktuelles/Aktuelles.html">Aktuelles</a>
      <a href="../../Fahrplan/Linienfahrplan.html">Linienfahrpläne und Netzplan</a>
      <a href="../Abfahrten.html">Abfahrtsanzeigen</a>
      <a href="../../Tickets/Tickets.html">Tickets / VBB</a>
      <a href="#">Über den ÖPNV in Schwedt</a>
    </div>
  </div>

   <!-- Lauftext -->
   <div class="ticker-container">
     <div class="ticker-text">
       Herzlich Willkommen bei den Stadtwerken Schwedt. Hier finden Sie alle wichtigen und aktuellen Informationen rund um Ihren Nahverkehr in Schwedt und Umgebung.
     </div>
   </div>


<h1>Abfahrten ab (H) Neustadt</h1>


		<div style="margin-left:50px; margin-bottom:15px;">
		  <label for="dateTimePicker">Datum und Uhrzeit wählen:</label>
		  <input type="datetime-local" id="dateTimePicker">
		  <button id="showFutureBtn">Anzeigen</button>
		  <button id="showNowBtn">Jetzt</button>
		</div>

   <div class="table-header">
  <div class="header-cell">Linie</div>
  <div class="header-cell">Ziel</div>
  <div class="header-cell">Steig</div>
  <div class="header-cell">Abfahrt</div>
  <div class="header-cell">Versp</div>
  </div>
<div id="departures"></div>

<div class="load-more-container">
  <button id="loadMoreBtn">Weitere Abfahrten anzeigen</button>
</div>
  
  <div id="infoText">Weitere Informationen unter: www.stadtwerkeschwedt.de <br> <br> 
 	<img src="../Rollstuhl-Symbol.png" alt="Rollstuhl-Symbol.png" width="20">  Dieses Fahrzeug ist barrierefrei. </div>
  <div id="currentDateTime"></div>

<!-- Grüner Balken als Abschluss ganz unten -->
  <div class="green-bar bar-bottom">
<div>Ein Unternehmen der Stadt Schwedt.<br><br>Servicenummer: 03567 16966782</div> <br> <div>Öffnungszeiten Kundenzentrum Markt<br>Mo-Fr 08-18 Uhr<br>Sa 09-16 Uhr<br>So geschlossen</div>
</div>



  <script>
  // Fahrpläne für unterschiedliche Wochentage
  const weekdaySchedule = [
    { line: "1", destination: "Industriepark Sehna-Nord", time: "04:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "05:15", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "05:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "05:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "06:15", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "06:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "06:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "06:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "07:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "07:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "07:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "07:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "08:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "08:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "08:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "08:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "09:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "09:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "09:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "09:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "10:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "10:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "10:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "10:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "11:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "11:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "11:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "11:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "12:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "12:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "12:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "12:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "13:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "13:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "13:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "13:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "14:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "14:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "14:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "14:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "15:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "15:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "15:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "15:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "16:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "16:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "16:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "16:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "17:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "17:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "17:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "17:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "18:05", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "18:20", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "18:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "18:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "19:15", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "19:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "19:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "20:15", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "20:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "20:55", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "21:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "22:35", platform: "2"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "00:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "01:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "02:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "03:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "04:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "05:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "05:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "06:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "06:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "06:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "06:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "07:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "07:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "07:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "07:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "08:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "08:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "08:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "08:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "09:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "09:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "09:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "09:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:05", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:20", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "18:35", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "20:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "20:30", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "20:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "22:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "22:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "23:20", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "23:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "23:49", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "04:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "05:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "05:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "05:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "06:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "06:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "06:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "07:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "07:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "07:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "08:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "08:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "08:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "09:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "09:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "09:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "10:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "10:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "10:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "11:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "11:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "11:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "12:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "12:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "12:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "13:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "13:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "13:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "14:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "14:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "14:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "15:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "15:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "15:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "16:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "16:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "16:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "17:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "17:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "17:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "18:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "18:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "18:52", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "19:12", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "19:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "20:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "20:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "21:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "21:32", platform: "1"  },
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "22:02", platform: "1"  },
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "22:32", platform: "1"  }
  ];

  const saturdaySchedule = [
    { line: "1", destination: "Industriepark Sehna-Nord", time: "06:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "07:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "08:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "09:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "10:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "11:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "12:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "13:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "14:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "15:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "16:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "17:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "18:25", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "19:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "20:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "21:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "22:35", platform: "2"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "00:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "01:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "02:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "03:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "04:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "05:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "07:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "07:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "08:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "08:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "09:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "09:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "09:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:50", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "19:10", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "20:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "20:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "22:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "22:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "23:20", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "23:30", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "23:49", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "07:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "08:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "08:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "09:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "09:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "10:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "10:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "11:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "11:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "12:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "12:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "13:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "13:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "14:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "14:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "15:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "15:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "16:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "16:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "17:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "17:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "18:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "18:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "19:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "19:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "20:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "20:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "21:02", platform: "1"  },
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "21:32", platform: "1"  },
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "22:02", platform: "1"  }
];


    const sundaySchedule = [
    { line: "1", destination: "Industriepark Sehna-Nord", time: "08:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "09:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "10:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "11:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "12:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "13:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "14:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "15:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "16:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "17:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "18:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "19:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "20:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "21:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "22:35", platform: "2"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "00:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "01:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "02:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "03:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "04:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "05:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "06:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "07:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "08:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "09:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "09:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "10:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "11:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "12:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "13:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "14:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:20", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "18:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "20:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "20:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "22:20", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "22:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "23:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "23:49", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "08:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "09:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "09:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "10:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "10:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "11:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "11:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "12:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "12:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "13:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "13:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "14:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "14:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "15:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "15:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "16:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "16:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "17:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "17:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "18:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "18:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "19:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "19:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "20:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "20:32", platform: "1"  },
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "21:02", platform: "1"  },
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "21:32", platform: "1"  }
];

function getScheduleForDate(date) {
  // Basis laut Feiertag/Wochentag
  let base;
  if (isPublicHoliday(date)) {
    base = sundaySchedule;
  } else {
    const dayIndex = date.getDay(); // 0=So, 6=Sa
    if (dayIndex === 6) base = saturdaySchedule;
    else if (dayIndex === 0) base = sundaySchedule;
    else base = weekdaySchedule;
  }

  // Einmalige Ergänzungen/Entfernungen
  const key = dateKey(date);
  const additions = SPECIAL_ADDITIONS[key] || [];
  const cancellations = SPECIAL_CANCELLATIONS[key] || [];

  if (cancellations.length) {
    base = base.filter(e =>
      !cancellations.some(c =>
        e.line === c.line &&
        e.time === c.time &&
        (c.destination ? e.destination === c.destination : true)
      )
    );
  }

  // Basis + Eventfahrten
  return [...base, ...additions];
}

// Lokaler Datumsschlüssel (ohne Zeitzonen-Überraschungen)
function dateKey(d) {
  const y = d.getFullYear();
  const m = String(d.getMonth() + 1).padStart(2, "0");
  const day = String(d.getDate()).padStart(2, "0");
  return `${y}-${m}-${day}`;
}

// Einmalige Zusatzfahrten (pro Datum)
const SPECIAL_ADDITIONS = {
  // Beispiel: Eventverkehr am 5.9.2025
  "2025-12-24": [
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "15:02", platform: "1"  },
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "18:32", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "15:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "20:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:49", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "22:49", platform: "1"  },
],

  "2025-10-14": [],

  "2025-09-07": []
};

// Einmalige Streichungen (kann leer bleiben, aber MUSS existieren)
const SPECIAL_CANCELLATIONS = {
  "2025-12-24": [
    { line: "2", destination: "Ostbahnhof", time: "15:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "16:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "17:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "18:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "18:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "19:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "19:32", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "20:02", platform: "1"  },
    { line: "2", destination: "Ostbahnhof", time: "20:32", platform: "1"  },
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "21:02", platform: "1"  },
    { line: "E2", destination: "Fr.-List-Platz ▶ Klingerweg, Betriebshof", time: "21:32", platform: "1"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "15:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "16:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "17:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "18:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "19:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "20:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "21:35", platform: "2"  },
    { line: "1", destination: "Industriepark Sehna-Nord", time: "22:35", platform: "2"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "15:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "16:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "17:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:00", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:20", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "18:40", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "18:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "19:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "20:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "20:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:20", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "21:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "22:20", platform: "1"  },
    { line: "E1", destination: "Klingerweg, Betriebshof", time: "22:50", platform: "1"  },
    { line: "1", destination: "Schwedter See / Hafen", time: "23:20", platform: "1"  },
]
};

/* Uhrzeit */
function updateDateTime() {
  const now = new Date();
  const options = { 
    year: 'numeric', 
    month: '2-digit', 
    day: '2-digit', 
    hour: '2-digit', 
    minute: '2-digit', 
    second: '2-digit' 
  };
  document.getElementById("datetime").textContent = 
    now.toLocaleDateString("de-DE", options);
}
updateDateTime();
setInterval(updateDateTime, 1000);


function generateDelay() {
  const rnd = Math.random();
  if (rnd < 0.70) return 0; // 70% pünktlich
  if (rnd < 0.95) return Math.floor(Math.random() * 3) + 1; // 1–3 Minuten
  return Math.floor(Math.random() * 5) + 4; // 4–8 Minuten
}

updateDateTime();
setInterval(updateDateTime, 1000);

// Hilfsfunktion zum Zeit-Parsing
function parseTimeToDate(dateBase, timeStr) {
  const [hour, minute] = timeStr.split(":").map(Number);
  return new Date(dateBase.getFullYear(), dateBase.getMonth(), dateBase.getDate(), hour, minute, 0);
}

function getInfoTextForLine(line) {
  switch(line) {
    case "1": return "Straßenbahnlinie 1";
    case "E1": return "Straßenbahnlinie E1";
    case "2": return "Straßenbahnlinie 2";
    case "E2": return "Straßenbahnlinie E2";
    default: return "Keine weiteren Informationen.";
  }
}

 
    // Globale Variable zum Speichern der Verspätungen
const delayCache = {};
window.departureDelays = window.departureDelays || new Map();
window.accessibilityCache = window.accessibilityCache || new Map();

function updateDepartures() {
  const now = new Date();
  const todayIndex = now.getDay();
  const todayBase = new Date(now.getFullYear(), now.getMonth(), now.getDate());
  const tomorrow = new Date(todayBase);
  tomorrow.setDate(tomorrow.getDate() + 1);
  const tomorrowIndex = tomorrow.getDay();

  // Persistent delays über window-Objekt
  window.departureDelays = window.departureDelays || new Map();

  const allDepartures = [
    ...getScheduleForDate(todayBase).map(entry => {
      const key = `${todayBase.toDateString()}_${entry.line}_${entry.time}`;
      if (!window.departureDelays.has(key)) {
        window.departureDelays.set(key, generateDelay());
      }
      const delay = window.departureDelays.get(key);
      return {
        ...entry,
        delay,
        departureTime: new Date(parseTimeToDate(todayBase, entry.time).getTime() + delay * 60000)
      };
    }),
    ...getScheduleForDate(tomorrow).map(entry => {
      const key = `${tomorrow.toDateString()}_${entry.line}_${entry.time}`;
      if (!window.departureDelays.has(key)) {
        window.departureDelays.set(key, generateDelay());
      }
      const delay = window.departureDelays.get(key);
      return {
        ...entry,
        delay,
        departureTime: new Date(parseTimeToDate(tomorrow, entry.time).getTime() + delay * 60000)
      };
    })
  ];

  const upcoming = allDepartures
    .filter(entry => entry.departureTime > now)
    .sort((a, b) => a.departureTime - b.departureTime)
    .slice(0, visibleCount); // nur die nächsten 6

  const container = document.getElementById("departures");
  container.innerHTML = "";

  upcoming.forEach(entry => {
    const row = document.createElement("div");
    row.className = "departure";

    const line = document.createElement("div");
    if (entry.line === "1") {
      line.className = "line line-1";
    } else if (entry.line === "E1") {
      line.className = "line line-e1";
    } else if (entry.line === "2") {
      line.className = "line line-2";
    } else if (entry.line === "E2") {
      line.className = "line line-e2";
    } else {
      line.className = "line";
    }
    line.textContent = entry.line;

    const dest = document.createElement("div");
    dest.className = "destination";
    dest.textContent = entry.destination;

		const accKey = `${entry.line}_${entry.time}_${entry.destination}`;
		if (!window.accessibilityCache.has(accKey)) {
		  // 70 % Wahrscheinlichkeit, dass die Fahrt barrierefrei ist
		  window.accessibilityCache.set(accKey, Math.random() < 0.7);
		}
		const isAccessible = window.accessibilityCache.get(accKey);

		if (isAccessible) {
		  const wheelchair = document.createElement("img");
		  wheelchair.src = "../Rollstuhl-Symbol.png";
		  wheelchair.alt = "Rollstuhl-Symbol";
		  wheelchair.style.width = "20px";
		  wheelchair.style.marginLeft = "5px";
		  dest.appendChild(wheelchair);
		}

    const platform = document.createElement("div");
    platform.className = "platform";
    platform.textContent = entry.platform || "-";

    const delay = document.createElement("div");
    delay.className = "delay";
    delay.innerHTML = entry.delay > 0
      ? `<span style="color:red">+${entry.delay}</span>`
      : "";

    const diffMs = entry.departureTime - now;
    const diffMin = Math.round(diffMs / 60000);

    const countdown = document.createElement("div");
    countdown.className = "countdown";

    if (diffMs >= 0 && diffMs < 60000) {
      countdown.textContent = "jetzt";
      countdown.classList.add("blinking");
    } else if (diffMin < 60) {
      countdown.textContent = `${diffMin} min`;
      countdown.classList.remove("blinking");
    } else {
      const h = entry.departureTime.getHours().toString().padStart(2, '0');
      const m = entry.departureTime.getMinutes().toString().padStart(2, '0');
      countdown.textContent = `${h}:${m}`;
      countdown.classList.remove("blinking");
    }

    row.appendChild(line);
    row.appendChild(dest);
    row.appendChild(platform);
    row.appendChild(countdown);
    row.appendChild(delay);
    container.appendChild(row);

    const infoPanel = document.createElement("div");
    infoPanel.className = "info-panel";

    // Zeit aus entry.time nehmen (das ist die geplante Zeit ohne Verspätung)
    const [hour, minute] = entry.time.split(":");
    const formattedTime = `${hour.padStart(2, '0')}:${minute.padStart(2, '0')}`;

    // Baue den Info-Text mit Zeit + Linieninfo
    let infoText = `Geplante Abfahrt: ${formattedTime} Uhr`;

    if (entry.delay > 0) {
    const delayedH = entry.departureTime.getHours().toString().padStart(2, '0');
    const delayedM = entry.departureTime.getMinutes().toString().padStart(2, '0');
    infoText += ` | heute: ${delayedH}:${delayedM}, +${entry.delay}`;
    }

		const accText = isAccessible ? "Fahrzeug ist barrierefrei." : "Fahrzeug ist nicht barrierefrei.";
		infoText += `\n\n${getInfoTextForLine(entry.line)}\n\n${accText}`;
		infoPanel.textContent = infoText;
    container.appendChild(infoPanel);

    row.addEventListener("click", () => {
      infoPanel.classList.toggle("open");
    });
  });
}

// Button: Mehr Abfahrten laden
document.getElementById("loadMoreBtn").addEventListener("click", () => {
  visibleCount += 5;
  if (futureMode && futureDate) {
    showDeparturesForDate(futureDate);
  } else {
    updateDepartures();
  }
});


//FEIERTAGE IN BRANDENBURG

function isPublicHoliday(date) {
  const year = date.getFullYear();
  const month = date.getMonth();
  const day = date.getDate();

  // feste Feiertage Brandenburg
  const fixedHolidays = [
    [0, 1],   // Neujahr
    [4, 1],   // Tag der Arbeit
    [9, 3],   // Tag der Deutschen Einheit
    [9, 31],  // Reformationstag
    [11, 24], // Heiligabend nach Feiertagfahrplan
    [11, 25], // 1. Weihnachtstag
    [11, 26], // 2. Weihnachtstag
  ];

  // Osterberechnung (Computus)
  function getEasterSunday(y) {
    const f = Math.floor,
      G = y % 19,
      C = f(y / 100),
      H = (C - f(C / 4) - f((8 * C + 13) / 25) + 19 * G + 15) % 30,
      I = H - f(H / 28) * (1 - f(29 / (H + 1)) * f((21 - G) / 11)),
      J = (y + f(y / 4) + I + 2 - C + f(C / 4)) % 7,
      L = I - J,
      month = 3 + f((L + 40) / 44),
      day = L + 28 - 31 * f(month / 4);
    return new Date(y, month - 1, day);
  }

  const easter = getEasterSunday(year);
  const holidays = fixedHolidays.map(([m, d]) => new Date(year, m, d));

  // Bewegliche Feiertage
  holidays.push(new Date(easter.getFullYear(), easter.getMonth(), easter.getDate() - 2)); // Karfreitag
  holidays.push(new Date(easter.getFullYear(), easter.getMonth(), easter.getDate() + 1)); // Ostermontag
  holidays.push(new Date(easter.getFullYear(), easter.getMonth(), easter.getDate() + 39)); // Christi Himmelfahrt
  holidays.push(new Date(easter.getFullYear(), easter.getMonth(), easter.getDate() + 50)); // Pfingstmontag

  return holidays.some(h =>
    h.getDate() === day &&
    h.getMonth() === month &&
    h.getFullYear() === year
  );
}


	function generateDelay() {
  const rnd = Math.random();
  if (rnd < 0.70) return 0;
  if (rnd < 0.95) return Math.floor(Math.random() * 3) + 1;
  return Math.floor(Math.random() * 5) + 4;
}

		// --- NEU: Zukunftsmodus & Buttons --- //
		let futureMode = false;
		let visibleCount = 6;
		let futureDate = null;
		let updateTimer = null;

		// Startet/stoppt das automatische Live-Update
		function startLiveUpdates() {
		  if (updateTimer) clearInterval(updateTimer);
		  updateTimer = setInterval(() => {
		    if (!futureMode) updateDepartures();
		  }, 60000);
		}

		// Button "Anzeigen" für Zukunft
		document.getElementById("showFutureBtn").addEventListener("click", () => {
		  const input = document.getElementById("dateTimePicker").value;
		  if (!input) {
		    alert("Bitte Datum und Uhrzeit wählen!");
		    return;
		  }

		  futureMode = true;
		  futureDate = new Date(input);

		  // 🧠 Live-Updates pausieren, wenn Zukunftsansicht aktiv ist
		  if (updateTimer) clearInterval(updateTimer);

		  showDeparturesForDate(futureDate);
		});

		// Button "Jetzt" für Live-Modus
		document.getElementById("showNowBtn").addEventListener("click", () => {
		  futureMode = false;
		  futureDate = null;
		  document.getElementById("dateTimePicker").value = "";

		  // 🔁 Live-Updates wieder aktivieren
		  startLiveUpdates();
		  updateDepartures();
		});

		// Zukunftsansicht (separat von der Live-Funktion)
		function showDeparturesForDate(selectedDate) {
		  const container = document.getElementById("departures");
		  container.innerHTML = "";

		  const base = getScheduleForDate(selectedDate);
		  const withDelay = base.map(entry => {
		  const delay = 0; // Keine Verspätung im Zukunftsmodus
		  const planned = parseTimeToDate(selectedDate, entry.time);
		  return {
		    ...entry,
		    delay,
		    departureTime: planned
		  };
		});

		  const upcoming = withDelay
		    .filter(e => e.departureTime >= selectedDate)
		    .sort((a, b) => a.departureTime - b.departureTime)
		    .slice(0, visibleCount);

		  upcoming.forEach(entry => {
		    const row = document.createElement("div");
		    row.className = "departure";

		    // Farb-Logik beibehalten
		    const line = document.createElement("div");
		    line.className = `line line-${entry.line}`;
		    line.textContent = entry.line;

		    const dest = document.createElement("div");
		    dest.className = "destination";
		    dest.textContent = entry.destination;

		    const accKey = `${entry.line}_${entry.time}_${entry.destination}`;
		if (!window.accessibilityCache.has(accKey)) {
		  window.accessibilityCache.set(accKey, Math.random() < 0.7);
		}
		const isAccessible = window.accessibilityCache.get(accKey);

		if (isAccessible) {
		  const wheelchair = document.createElement("img");
		  wheelchair.src = "../Rollstuhl-Symbol.png";
		  wheelchair.alt = "Rollstuhl";
		  wheelchair.style.width = "20px";
		  wheelchair.style.marginLeft = "5px";
		  dest.appendChild(wheelchair);
		}

		    const platform = document.createElement("div");
		    platform.className = "platform";
		    platform.textContent = entry.platform || "-";

		    const countdown = document.createElement("div");
		    countdown.className = "countdown";
		    const h = entry.departureTime.getHours().toString().padStart(2, '0');
		    const m = entry.departureTime.getMinutes().toString().padStart(2, '0');
		    countdown.textContent = `${h}:${m}`;

		    const delayDiv = document.createElement("div");
		    delayDiv.className = "delay";
		    delayDiv.innerHTML = entry.delay > 0
		      ? `<span style="color:red">+${entry.delay}</span>` : "";

		    row.append(line, dest, platform, countdown, delayDiv);
		    container.appendChild(row);

		    // Info-Panel (ausklappbar)
		    const infoPanel = document.createElement("div");
		    infoPanel.className = "info-panel";
		    const plannedTime = entry.time;
		    let infoText = `Geplante Abfahrt: ${plannedTime} Uhr`;
		    if (entry.delay > 0) {
		      const delayedH = entry.departureTime.getHours().toString().padStart(2, '0');
		      const delayedM = entry.departureTime.getMinutes().toString().padStart(2, '0');
		      infoText += ` | heute: ${delayedH}:${delayedM}, +${entry.delay}`;
		    }
		    const accText = isAccessible ? "Fahrzeug ist barrierefrei." : "Fahrzeug ist nicht barrierefrei.";
		    infoText += `\n\n${getInfoTextForLine(entry.line)}\n\n${accText}`;
		    infoPanel.textContent = infoText;
		    container.appendChild(infoPanel);

		    row.addEventListener("click", () => infoPanel.classList.toggle("open"));
		  });
		}

		// Beim Start Live-Updates aktivieren
		startLiveUpdates();


		// --- Seite startet im Live-Modus --- //
		window.addEventListener("DOMContentLoaded", () => {
		  futureMode = false;      // Immer mit Echtzeit starten
		  futureDate = null;
		  document.getElementById("dateTimePicker").value = "";
		  startLiveUpdates();      // Starte Live-Timer
		  updateDepartures();      // Zeige sofort aktuelle Abfahrten
		});

  </script>
</body>
</html>
